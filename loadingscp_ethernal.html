<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>SCP // Secure Loading Interface</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Police terminal moderne -->
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #020308;
      --bg-alt: #050711;
      --accent: #00ff9c;
      --accent-soft: rgba(0, 255, 156, 0.1);
      --accent-strong: #00e08a;
      --danger: #ff4b4b;
      --text-main: #e5fff2;
      --text-dim: #7ad9b5;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
    }

    body {
      font-family: "IBM Plex Mono", monospace;
      background:
        radial-gradient(circle at top, #11141f 0, #020308 55%, #000000 100%);
      color: var(--text-main);
      overflow: hidden;
      letter-spacing: 0.03em;
      position: relative;
    }

    /* Effet CRT léger */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      background:
        repeating-linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.12) 0px,
          rgba(0, 0, 0, 0.12) 1px,
          rgba(0, 0, 0, 0) 2px
        );
      mix-blend-mode: soft-light;
      opacity: 0.35;
      z-index: 1;
    }

    body::after {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      background: radial-gradient(circle at center, transparent 0, rgba(0,0,0,0.65) 70%);
      z-index: 1;
    }

    .scanline {
      position: fixed;
      inset: 0;
      pointer-events: none;
      background: linear-gradient(
        to bottom,
        rgba(255, 255, 255, 0.1) 0%,
        rgba(0, 0, 0, 0) 10%
      );
      mix-blend-mode: soft-light;
      animation: scan 4s linear infinite;
      opacity: 0.25;
      z-index: 2;
    }

    @keyframes scan {
      0%   { transform: translateY(-100%); }
      100% { transform: translateY(100%); }
    }

    /* Layout principal */
    .wrapper {
      position: relative;
      z-index: 3;
      display: flex;
      flex-direction: column;
      height: 100%;
      padding: 32px clamp(24px, 4vw, 48px);
      gap: 20px;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      text-transform: uppercase;
      color: var(--text-dim);
      opacity: 0.9;
    }

    .top-bar span {
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .top-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 12px var(--accent);
      animation: dotPulse 1.8s ease-in-out infinite;
    }

    @keyframes dotPulse {
      0%, 100% { opacity: 0.4; transform: scale(1); }
      50%      { opacity: 1;   transform: scale(1.3); }
    }

    .main {
      flex: 1;
      display: grid;
      grid-template-columns: minmax(0, 1.35fr) minmax(0, 1fr);
      gap: 32px;
      min-height: 0;
    }

    @media (max-width: 900px) {
      .main {
        grid-template-columns: 1fr;
      }
    }

    /* Bloc gauche (titre + info serveur) */
    .panel {
      border-radius: 16px;
      background: radial-gradient(circle at top left, #141926 0, #05060d 40%, #020308 100%);
      border: 1px solid rgba(0, 255, 156, 0.2);
      box-shadow:
        0 0 26px rgba(0, 0, 0, 0.9),
        0 0 32px rgba(0, 255, 156, 0.05);
      padding: 24px 24px 20px;
      position: relative;
      overflow: hidden;
    }

    .panel::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at top left, rgba(0, 255, 156, 0.12), transparent 50%);
      opacity: 0.9;
      pointer-events: none;
    }

    .panel-inner {
      position: relative;
      z-index: 1;
      height: 100%;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    .heading {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .scp-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-dim);
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(0, 255, 156, 0.4);
      background: linear-gradient(to right, rgba(0, 0, 0, 0.7), rgba(0, 255, 156, 0.08));
    }

    .scp-logo {
      width: 14px;
      height: 14px;
      border-radius: 999px;
      border: 2px solid var(--accent);
      box-shadow: 0 0 10px rgba(0,255,156,0.7);
      position: relative;
    }

    .scp-logo::before,
    .scp-logo::after {
      content: "";
      position: absolute;
      inset: 3px;
      border-radius: inherit;
      border: 1px solid rgba(0,255,156,0.7);
    }

    .scp-logo::after {
      inset: 5px;
      border-color: rgba(0,255,156,0.45);
    }

    .title-line {
      display: flex;
      flex-wrap: wrap;
      align-items: baseline;
      gap: 12px;
    }

    .server-name {
      font-size: clamp(22px, 3vw, 30px);
      text-transform: uppercase;
      font-weight: 600;
      text-shadow:
        0 0 10px rgba(0, 0, 0, 0.9),
        0 0 24px rgba(0, 255, 156, 0.3);
    }

    .server-name span {
      color: var(--accent);
    }

    .server-tagline {
      font-size: 11px;
      text-transform: uppercase;
      color: var(--text-dim);
    }

    .meta-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
      font-size: 12px;
    }

    .meta-item {
      padding: 8px 10px;
      border-radius: 8px;
      background: rgba(0, 0, 0, 0.35);
      border: 1px solid rgba(0, 255, 156, 0.1);
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .meta-label {
      font-size: 10px;
      text-transform: uppercase;
      color: var(--text-dim);
    }

    .meta-value {
      font-size: 12px;
      color: var(--accent-strong);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .log-window {
      flex: 1;
      min-height: 120px;
      margin-top: 6px;
      border-radius: 10px;
      padding: 10px 12px;
      background: radial-gradient(circle at top left, rgba(0, 0, 0, 0.6), rgba(3, 8, 10, 0.9));
      border: 1px solid rgba(0, 255, 156, 0.18);
      font-size: 12px;
      overflow: hidden;
      position: relative;
    }

    .log-window-inner {
      position: absolute;
      inset: 10px 12px;
      overflow: hidden;
    }

    .log {
      position: absolute;
      inset: 0;
      overflow-y: hidden;
      display: flex;
      flex-direction: column-reverse;
      gap: 2px;
      padding-right: 8px;
    }

    .log-line {
      white-space: nowrap;
      color: var(--text-dim);
      opacity: 0.8;
    }

    .log-time {
      color: rgba(0, 255, 156, 0.9);
      margin-right: 6px;
    }

    .log-key {
      color: var(--accent-strong);
    }

    .log-value {
      color: var(--text-main);
    }

    .log-line.warning {
      color: var(--danger);
    }

    /* Bloc droit (progress + tips) */
    .panel-right {
      border-radius: 16px;
      background: radial-gradient(circle at top right, #151d2b 0, #05060d 40%, #020308 100%);
      border: 1px solid rgba(0, 255, 156, 0.2);
      box-shadow:
        0 0 26px rgba(0, 0, 0, 0.9),
        0 0 32px rgba(0, 255, 156, 0.05);
      padding: 20px 20px 18px;
      position: relative;
      overflow: hidden;
    }

    .panel-right::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at top right, rgba(0, 255, 156, 0.12), transparent 55%);
      opacity: 0.9;
      pointer-events: none;
    }

    .panel-right-inner {
      position: relative;
      z-index: 1;
      height: 100%;
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-dim);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .section-title span {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .section-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      border: 1px solid var(--accent);
      box-shadow: 0 0 8px rgba(0, 255, 156, 0.6);
    }

    .progress-wrapper {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .progress-label-row {
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      color: var(--text-dim);
    }

    .progress-label-row strong {
      color: var(--accent-strong);
      letter-spacing: 0.08em;
    }

    .progress-bar-outer {
      width: 100%;
      border-radius: 999px;
      padding: 3px;
      background: linear-gradient(135deg, rgba(0,255,156,0.3), rgba(0,255,156,0.02));
      box-shadow: 0 0 20px rgba(0, 255, 156, 0.15);
    }

    .progress-bar-inner {
      width: 100%;
      height: 16px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.85);
      overflow: hidden;
      position: relative;
    }

    .progress-fill {
      position: absolute;
      inset: 0;
      width: 0%;
      background:
        linear-gradient(90deg, #00ff9c, #7dffd2);
      box-shadow:
        0 0 12px rgba(0, 255, 156, 0.7),
        0 0 26px rgba(0, 255, 156, 0.35);
      transform-origin: left center;
      transition: width 0.25s ease-out;
    }

    .progress-glow {
      position: absolute;
      inset: -40%;
      opacity: 0.3;
      background:
        conic-gradient(
          from 0deg,
          rgba(0, 255, 156, 0.0),
          rgba(0, 255, 156, 0.5),
          rgba(0, 255, 156, 0.0)
        );
      animation: spin 3.5s linear infinite;
      pointer-events: none;
    }

    @keyframes spin {
      0%   { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .progress-text-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      font-size: 11px;
      margin-top: 4px;
    }

    .progress-phase {
      color: var(--text-main);
    }

    .progress-percent {
      color: var(--accent-strong);
      font-weight: 600;
      letter-spacing: 0.1em;
      text-align: right;
      min-width: 40px;
    }

    .module-list {
      margin-top: 10px;
      border-radius: 10px;
      padding: 8px 10px;
      background: rgba(0, 0, 0, 0.55);
      border: 1px solid rgba(0, 255, 156, 0.15);
      font-size: 11px;
      max-height: 132px;
      overflow: hidden;
    }

    .module-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 2px 0;
      color: var(--text-dim);
    }

    .module-name {
      display: flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .module-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: rgba(0, 255, 156, 0.18);
    }

    .module-status {
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-size: 10px;
      color: rgba(0, 255, 156, 0.75);
    }

    .module-row.active .module-dot {
      background: var(--accent);
      box-shadow: 0 0 10px rgba(0, 255, 156, 0.8);
    }

    .module-row.active .module-status {
      color: var(--accent);
    }

    .module-row.done .module-status {
      color: rgba(0, 255, 156, 0.45);
    }

    .module-row.done .module-name {
      opacity: 0.7;
    }

    .tips {
      margin-top: 12px;
      padding-top: 8px;
      border-top: 1px dashed rgba(0, 255, 156, 0.22);
      font-size: 11px;
      color: var(--text-dim);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .tips-label {
      text-transform: uppercase;
      letter-spacing: 0.12em;
      font-size: 10px;
      opacity: 0.9;
    }

    .tips-text {
      color: var(--text-main);
    }

    /* Barres de statut bas */
    .bottom-bar {
      font-size: 10px;
      color: var(--text-dim);
      text-transform: uppercase;
      display: flex;
      justify-content: space-between;
      gap: 12px;
    }

    .bottom-bar span {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .bottom-highlight {
      color: var(--accent-strong);
    }
  </style>
</head>
<body>
  <div class="scanline"></div>

  <div class="wrapper">
    <!-- BARRE HAUT -->
    <div class="top-bar">
      <span>
        <div class="top-dot"></div>
        FOUNDATION LINK: ONLINE
      </span>
      <span>
        PROTOCOL: <span class="bottom-highlight">SCP-LOADING-α</span> · CHANNEL: SECURE
      </span>
    </div>

    <div class="main">
      <!-- PANEL GAUCHE -->
      <div class="panel">
        <div class="panel-inner">
          <div class="heading">
            <div class="scp-badge">
              <div class="scp-logo"></div>
              SCP FOUNDATION // BOOTSTRAP INTERFACE
            </div>

            <div class="title-line">
              <!-- Nom du serveur ICI -->
              <div class="server-name">
                SITE-██ / <span>PERDIUM</span> SECURE NODE
              </div>
              <!-- Sous-titre editable -->
              <div class="server-tagline">
                Garry's Mod · Anomalous Containment & Simulation Protocol
              </div>
            </div>
          </div>

          <div class="meta-grid">
            <div class="meta-item">
              <div class="meta-label">Serveur</div>
              <div class="meta-value" id="meta-map">gm_scp_facility</div>
            </div>
            <div class="meta-item">
              <div class="meta-label">Adresse</div>
              <div class="meta-value" id="meta-ip">xx.xx.xx.xx:27015</div>
            </div>
            <div class="meta-item">
              <div class="meta-label">Session ID</div>
              <div class="meta-value" id="meta-session">BOOT-██-██-██</div>
            </div>
            <div class="meta-item">
              <div class="meta-label">Sécurité</div>
              <div class="meta-value">CLEARANCE LEVEL 3</div>
            </div>
          </div>

          <div class="log-window">
            <div class="log-window-inner">
              <div class="log" id="log"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- PANEL DROIT -->
      <div class="panel-right">
        <div class="panel-right-inner">
          <div class="section-title">
            <span>
              <div class="section-dot"></div>
              LOADING PROTOCOL
            </span>
            <span id="status-label">HANDSHAKE WITH CLIENT...</span>
          </div>

          <div class="progress-wrapper">
            <div class="progress-label-row">
              <strong>FOUNDATION SYSTEM BOOT</strong>
              <span>PHASE: <span id="phase-label">INITIALIZE</span></span>
            </div>

            <div class="progress-bar-outer">
              <div class="progress-bar-inner">
                <div class="progress-fill" id="progress-fill"></div>
                <div class="progress-glow"></div>
              </div>
            </div>

            <div class="progress-text-row">
              <div class="progress-phase" id="phase-text">
                Initialisation des sous-systèmes…
              </div>
              <div class="progress-percent" id="percent-text">00%</div>
            </div>
          </div>

          <div class="module-list" id="module-list">
            <!-- Les lignes sont générées en JS -->
          </div>

          <div class="tips">
            <div class="tips-label">CONSEIL OPÉRATEUR</div>
            <div class="tips-text" id="tip-text">
              En cas d’anomalie, ne quittez pas l’interface de chargement. La Fondation vous observe.
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- BARRE BAS -->
    <div class="bottom-bar">
      <span>
        CLIENT STATUS: <span class="bottom-highlight" id="bottom-status">SYNCHRONISATION EN COURS</span>
      </span>
      <span id="bottom-right">CHANNEL LOG: BOOTSTRAP &gt; LOADING &gt; SECURE</span>
    </div>
  </div>

  <script>
    // -------------------------------
    // CONFIG BASIQUE / VALEURS PAR DÉFAUT
    // -------------------------------

    // Valeurs affichées si tu ouvres la page directement dans un navigateur.
    document.getElementById("meta-map").textContent = "gm_scp_site";
    document.getElementById("meta-ip").textContent = "play.tonserveur.fr:27015";

    const modules = [
        "AUTH / SteamID & Session Token",
        "CORE / Physique & Entités de base",
        "NET / Canaux de communication sécurisés",
        "SCP / Anomalous Containment Routines",
        "HUD / Interfaces et overlays",
        "PLAYER / Données opérateur & Inventaire",
        "SFX / Ambiances et canaux audio",
        "MAP / Géométrie et éclairage",
        "NPC / IA hostiles et alliées",
        "FINAL / Synchronisation de la réalité locale"
    ];

    const phases = [
        "Initialisation des sous-systèmes",
        "Chargement des modules critiques",
        "Préparation de la zone de test",
        "Synchronisation opérateur",
        "Validation des routines SCP",
        "Arrimage au client Garry's Mod"
    ];

    const tips = [
        "Ne regardez jamais directement un SCP sans protocole d’autorisation. Même en RP.",
        "Les logs sont surveillés. Les memes aussi.",
        "Restez groupés. Seul, vous êtes du très bon matériel d’expérience.",
        "Les bruits de couloir sont normaux. Les voix qui chuchotent votre nom, moins.",
        "Signalez tout comportement anormal… sauf le vôtre.",
        "Si vous pensez être observé, c’est probablement le cas.",
        "Les ascenseurs fonctionnent 73% du temps. Le reste est classé.",
        "En cas de crash, accusez toujours la réalité, jamais la Fondation."
    ];

    // -------------------------------
    // RÉFÉRENCES DOM
    // -------------------------------

    const moduleListEl   = document.getElementById("module-list");
    const logEl          = document.getElementById("log");
    const fillEl         = document.getElementById("progress-fill");
    const percentEl      = document.getElementById("percent-text");
    const phaseLabelEl   = document.getElementById("phase-label");
    const phaseTextEl    = document.getElementById("phase-text");
    const statusLabelEl  = document.getElementById("status-label");
    const bottomStatusEl = document.getElementById("bottom-status");
    const metaMapEl      = document.getElementById("meta-map");
    const metaIpEl       = document.getElementById("meta-ip");
    const metaSessionEl  = document.getElementById("meta-session");
    const bottomRightEl  = document.getElementById("bottom-right");
    const tipEl          = document.getElementById("tip-text");

    // -------------------------------
    // GÉNÉRATION DES MODULES
    // -------------------------------

    const moduleEls = modules.map((m) => {
        const row = document.createElement("div");
        row.className = "module-row";
        row.innerHTML = `
        <div class="module-name">
            <div class="module-dot"></div>
            <span>${m}</span>
        </div>
        <div class="module-status">PENDING</div>
        `;
        moduleListEl.appendChild(row);
        return row;
    });

    // -------------------------------
    // LOG TERMINAL
    // -------------------------------

    function nowTime() {
        const d = new Date();
        const pad = (n) => String(n).padStart(2, "0");
        return `${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;
    }

    function addLog(line, type) {
        const div = document.createElement("div");
        div.className = "log-line" + (type ? " " + type : "");
        div.innerHTML = `<span class="log-time">[${nowTime()}]</span>${line}`;
        logEl.prepend(div);

        const max = 25;
        while (logEl.children.length > max) {
        logEl.removeChild(logEl.lastChild);
        }
    }

    addLog('<span class="log-key">BOOT</span>: Initialisation de l’interface de chargement…', null);
    addLog('<span class="log-key">LINK</span>: En attente de la connexion client Garry’s Mod…', null);

    // -------------------------------
    // PROGRESSION (RÉELLE GMod + FALLBACK FAUX)
    // -------------------------------

    let filesTotal   = 0;
    let filesNeeded  = 0;
    let usingReal    = false;
    let fakeProgress = 0;
    let lastPhaseIndex = -1;

    function applyPhase(progress) {
        const phaseIndex = Math.min(
        phases.length - 1,
        Math.floor((progress / 100) * phases.length)
        );
        if (phaseIndex !== lastPhaseIndex) {
        lastPhaseIndex = phaseIndex;
        const label = phases[phaseIndex];
        phaseLabelEl.textContent = `PHASE ${phaseIndex + 1}`;
        phaseTextEl.textContent = label + "…";
        addLog(`<span class="log-key">PHASE</span>: ${label}…`, null);
        }
    }

    function updateModulesFromProgress(p) {
        const total = modules.length;
        const activeIndex = Math.floor((p / 100) * total);

        moduleEls.forEach((row, index) => {
        row.classList.remove("active", "done");
        const status = row.querySelector(".module-status");
        if (index < activeIndex - 1) {
            row.classList.add("done");
            status.textContent = "OK";
        } else if (index === activeIndex - 1) {
            row.classList.add("active");
            status.textContent = "RUNNING";
        } else {
            status.textContent = "PENDING";
        }
        });
    }

    function applyProgress(p) {
        const clamped = Math.max(0, Math.min(99, p)); // GMod finira lui-même
        fillEl.style.width = clamped.toFixed(0) + "%";
        percentEl.textContent = String(clamped | 0).padStart(2, "0") + "%";

        applyPhase(clamped);
        updateModulesFromProgress(clamped);

        if (clamped > 10 && clamped < 50) {
        statusLabelEl.textContent = "LOADING SERVER RESOURCES…";
        bottomStatusEl.textContent = "TRANSFERT DES FICHIERS & TABLES";
        } else if (clamped >= 50 && clamped < 90) {
        statusLabelEl.textContent = "SYNCHRONISATION DES ENTITÉS…";
        bottomStatusEl.textContent = "PRÉPARATION DU CONFINEMENT LOCAL";
        } else if (clamped >= 90) {
        statusLabelEl.textContent = "ATTENTE DU CLIENT…";
        bottomStatusEl.textContent = "LE JEU FINIT DE CHARGER LES DONNÉES";
        }
    }

    function tickProgress() {
        if (!usingReal) {
        // Fallback visuel quand GMod n’a pas encore appelé SetFilesTotal/Needed
        if (fakeProgress < 99) {
            const step = fakeProgress < 40 ? 2 + Math.random() * 3 :
                        fakeProgress < 80 ? 1 + Math.random() * 2 :
                        0.4 + Math.random() * 1.0;
            fakeProgress = Math.min(99, fakeProgress + step);
        }
        applyProgress(fakeProgress);
        } else {
        if (filesTotal > 0) {
            const done = filesTotal - filesNeeded;
            const realProgress = (done / filesTotal) * 100;
            applyProgress(realProgress);
        }
        }
    }

    setInterval(tickProgress, 650);

    // -------------------------------
    // TIPS ROTATIFS
    // -------------------------------

    let lastTip = -1;
    function setRandomTip() {
        let idx = Math.floor(Math.random() * tips.length);
        if (idx === lastTip && tips.length > 1) {
        idx = (idx + 1) % tips.length;
        }
        lastTip = idx;
        tipEl.textContent = tips[idx];
    }

    setRandomTip();
    setInterval(setRandomTip, 9000);

    // -------------------------------
    // LOGS RANDOM POUR LE STYLE
    // -------------------------------

    const randomLogs = [
        '<span class="log-key">SCAN</span>: Ping des nœuds périphériques… OK',
        '<span class="log-key">AUTH</span>: Jeton opérateur validé.',
        '<span class="log-key">I/O</span>: Canaux d’assets montés avec succès.',
        '<span class="log-key">SCP</span>: Routines de confinement simulées en mémoire.',
        '<span class="log-key">MEM</span>: Allocation de ressources… OK',
        '<span class="log-key">NET</span>: Latence estimée dans les normes.',
        '<span class="log-key">CHK</span>: Aucune anomalie critique détectée.',
        '<span class="log-key">RPC</span>: Synchronisation événementielle établie.'
    ];

    function randomLogTick() {
        const choose = randomLogs[Math.floor(Math.random() * randomLogs.length)];
        addLog(choose, null);
    }

    setInterval(randomLogTick, 3200 + Math.random() * 2200);

    setTimeout(() => {
        addLog('<span class="log-key">NOTICE</span>: La progression réelle dépend des téléchargements côté client.', "warning");
    }, 6000);

    // -------------------------------
    // CALLBACKS OFFICIELS GARRY'S MOD
    // -------------------------------

    // Appelé quand la page de loading est prête, avec les infos serveur/joueur
    window.GameDetails = function(serverName, serverURL, mapName, maxPlayers, steamID, gamemode, volume, language) {
        metaMapEl.textContent     = mapName || "Unknown";
        metaSessionEl.textContent = `SESSION ${maxPlayers || "??"}-SLOTS`;
        bottomRightEl.textContent = `CHANNEL LOG: ${gamemode || "GAMEMODE"} @ ${serverName}`;

        addLog(
        `<span class="log-key">GAMEDETAILS</span>: Connexion à <span class="log-value">${serverName}</span> sur <span class="log-value">${mapName}</span> (${gamemode}).`,
        null
        );

        // Pas d’IP fournie directement, donc on laisse ton IP “pub” ou tu peux parser window.location si tu as mis ?ip=...
    };

    // Nombre total de fichiers à télécharger
    window.SetFilesTotal = function(total) {
        filesTotal = total || 0;
        usingReal  = filesTotal > 0;

        addLog(`<span class="log-key">FILES</span>: Total à télécharger = <span class="log-value">${filesTotal}</span>.`, null);
    };

    // Nombre de fichiers restant à télécharger
    window.SetFilesNeeded = function(needed) {
        filesNeeded = needed || 0;
        usingReal   = filesTotal > 0;

        addLog(
        `<span class="log-key">FILES</span>: Restant = <span class="log-value">${filesNeeded}</span>.`,
        null
        );
    };

    // Status text (“Starting Lua…”, etc.)
    window.SetStatusChanged = function(status) {
        phaseTextEl.textContent = status;
        addLog(`<span class="log-key">STATUS</span>: ${status}`, null);
    };

    // Nom du fichier en cours de téléchargement
    window.DownloadingFile = function(fileName) {
        addLog(
        `<span class="log-key">DL</span>: <span class="log-value">${fileName}</span>`,
        null
        );
    };
    </script>

</body>
</html>
